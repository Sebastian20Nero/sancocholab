<div class="space-y-4">
    <div class="flex items-center justify-between">
        <div>
            <h1 class="text-xl font-semibold text-gray-900 dark:text-gray-100">Cotizaciones</h1>
            <p class="text-sm text-gray-500">Gestión y consulta de cotizaciones de productos</p>
        </div>
        <button (click)="openUploadModal()"
            class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
            </svg>
            Importar Excel
        </button>
    </div>

    <div class="rounded-xl border border-gray-200 bg-white p-4 dark:bg-gray-900 dark:border-gray-800">
        <app-quotation-filters [initial]="query()" [suppliers]="suppliers()" [products]="products()"
            [categories]="categories()" (changed)="onFiltersChange($event)">
        </app-quotation-filters>
    </div>

    <div *ngIf="loading()" class="text-sm text-gray-500">Cargando cotizaciones…</div>
    <div *ngIf="error()" class="text-sm text-red-600 dark:text-red-400">{{ error() }}</div>

    <div *ngIf="!loading() && !error()">
        <div *ngIf="quotations().length > 0" class="text-sm text-gray-500 mb-2">
            Total: {{ quotations().length }} cotizacion(es)
        </div>

        <div *ngIf="quotations().length === 0" class="text-sm text-gray-500 text-center py-8">
            Selecciona filtros y haz clic en "Aplicar Filtros" para consultar cotizaciones
        </div>

        <app-quotation-table [items]="quotations()" (edit)="onEdit($event)" (delete)="onDelete($event)">
        </app-quotation-table>
    </div>

    <!-- Upload Modal -->
    <app-quotation-upload *ngIf="showUploadModal()" (closed)="closeUploadModal($event)"></app-quotation-upload>

    <!-- Edit Modal -->
    <app-quotation-edit-modal *ngIf="showEditModal() && editingQuotation()" [quotation]="editingQuotation()!"
        [units]="units()" (saved)="closeEditModal($event)" (cancelled)="closeEditModal(false)">
    </app-quotation-edit-modal>
</div>